<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Swinger Monkey - So Easy Monkey Can Do It</title>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üêµ</text></svg>">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    :root {
      --gold: #D4AF37;
      --jade: #00A86B;
      --turquoise: #40E0D0;
      --terracotta: #C84C32;
      --stone-dark: #2C2416;
      --stone-mid: #4A3C2A;
      --stone-light: #8B7355;
      --cream: #F5E6C8;
    }

    body {
      font-family: 'Press Start 2P', cursive;
      background: linear-gradient(to bottom, #1a1408 0%, #2C2416 30%, #3d3020 60%, #2C2416 100%);
      min-height: 100vh;
      color: var(--cream);
      padding: 20px;
    }

    #game-container {
      max-width: 800px;
      margin: 0 auto;
      background: var(--stone-mid);
      border: 4px solid var(--gold);
      border-radius: 0;
      padding: 20px;
      clip-path: polygon(
        0 3%, 3% 0, 97% 0, 100% 3%,
        100% 97%, 97% 100%, 3% 100%, 0 97%
      );
      position: relative;
    }

    #game-container::before {
      content: '';
      position: absolute;
      top: 10px;
      left: 10px;
      right: 10px;
      bottom: 10px;
      border: 2px solid var(--jade);
      pointer-events: none;
    }

    h1 {
      text-align: center;
      color: var(--gold);
      font-size: clamp(0.8rem, 3vw, 1.2rem);
      margin-bottom: 20px;
      text-shadow: 2px 2px 0 var(--stone-dark);
    }

    .status-bar {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin-bottom: 20px;
    }

    .status-item {
      text-align: center;
      padding: 12px 8px;
      background: var(--stone-dark);
      border: 2px solid var(--gold);
      font-size: 0.6rem;
      clip-path: polygon(
        0 15%, 15% 0, 85% 0, 100% 15%,
        100% 85%, 85% 100%, 15% 100%, 0 85%
      );
    }

    .status-item span {
      color: var(--turquoise);
      display: block;
      margin-top: 5px;
      font-size: 0.8rem;
    }

    #output {
      background: var(--stone-dark);
      padding: 15px;
      min-height: 300px;
      max-height: 400px;
      overflow-y: auto;
      margin-bottom: 20px;
      border: 3px solid var(--jade);
      font-size: 0.55rem;
      line-height: 1.8;
    }

    #output::-webkit-scrollbar {
      width: 10px;
    }

    #output::-webkit-scrollbar-track {
      background: var(--stone-dark);
    }

    #output::-webkit-scrollbar-thumb {
      background: var(--gold);
      border: 2px solid var(--stone-dark);
    }

    .controls {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
    }

    .controls button {
      font-family: 'Press Start 2P', cursive;
      background: linear-gradient(to bottom, var(--stone-light) 0%, var(--stone-mid) 100%);
      color: var(--cream);
      border: 3px solid var(--gold);
      padding: 15px 10px;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 0.5rem;
      clip-path: polygon(
        0 15%, 15% 0, 85% 0, 100% 15%,
        100% 85%, 85% 100%, 15% 100%, 0 85%
      );
    }

    .controls button:hover {
      background: linear-gradient(to bottom, var(--stone-mid) 0%, var(--stone-dark) 100%);
      border-color: var(--turquoise);
      transform: scale(1.05);
    }

    .controls button:active {
      transform: scale(0.95);
    }

    .controls button.climb-btn {
      background: linear-gradient(to bottom, var(--jade) 0%, #007a50 100%);
      border-color: var(--turquoise);
    }

    .controls button.quit-btn {
      background: linear-gradient(to bottom, var(--terracotta) 0%, #a33d28 100%);
      border-color: var(--terracotta);
    }

    .back-link {
      display: block;
      text-align: center;
      margin-top: 20px;
      color: var(--gold);
      text-decoration: none;
      font-size: 0.6rem;
      transition: color 0.2s;
    }

    .back-link:hover {
      color: var(--turquoise);
    }

    /* Mini-game styling */
    .minigame {
      background: var(--stone-mid);
      border: 2px solid var(--gold);
      padding: 15px;
      margin: 10px 0;
    }

    .minigame strong {
      color: var(--gold);
    }

    .options {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
      margin-top: 10px;
    }

    .options button {
      font-family: 'Press Start 2P', cursive;
      background: var(--stone-dark);
      color: var(--cream);
      border: 2px solid var(--jade);
      padding: 10px;
      cursor: pointer;
      font-size: 0.45rem;
      transition: all 0.2s;
    }

    .options button:hover {
      background: var(--jade);
      color: var(--stone-dark);
    }

    @media (max-width: 600px) {
      .status-bar {
        grid-template-columns: 1fr;
      }

      .controls {
        grid-template-columns: repeat(2, 1fr);
      }

      .status-item {
        font-size: 0.5rem;
      }

      #output {
        min-height: 250px;
        font-size: 0.5rem;
      }
    }
  </style>
</head>
<body>
  <div id="game-container">
    <h1>SWINGER MONKEY</h1>

    <div class="status-bar">
      <div class="status-item">HEALTH<span id="health">100</span></div>
      <div class="status-item">BANANAS<span id="bananas">0</span></div>
      <div class="status-item">SONGS<span id="songs">0</span></div>
    </div>

    <div id="output"></div>

    <div class="controls">
      <button onclick="game.handleChoice('l')">LEFT (L)</button>
      <button onclick="game.handleChoice('s')">STRAIGHT (S)</button>
      <button onclick="game.handleChoice('r')">RIGHT (R)</button>
      <button id="climbBtn" class="climb-btn" style="display:none;" onclick="game.handleChoice('u')">CLIMB UP (U)</button>
      <button onclick="game.restart()">RESTART</button>
      <button class="quit-btn" onclick="game.handleChoice('q')">QUIT (Q)</button>
    </div>

    <a href="index.html" class="back-link">&lt; BACK TO HOME</a>
  </div>

  <script>
    class Game {
      constructor() {
        this.init();
        this.healthElement = document.getElementById('health');
        this.bananasElement = document.getElementById('bananas');
        this.songsElement = document.getElementById('songs');
        this.climbBtn = document.getElementById('climbBtn');

        document.addEventListener('keydown', (e) => {
          const key = e.key.toLowerCase();
          if (['l', 'r', 's', 'u', 'q'].includes(key)) {
            this.handleChoice(key);
          }
        });
      }

      init() {
        this.health = 100;
        this.bananas = 0;
        this.jungleSongs = 0;
        this.hasGoldenBanana = false;
        this.canClimbUp = false;
        this.gameOver = false;
        this.events = [
          ...Array(6).fill(['snake', 'banana_tree', 'muddy_pit', 'banana_stash', 'nothing']).flat(),
          ...Array(3).fill('meet_friend'),
          'golden_banana'
        ];
      }

      print(text) {
        const output = document.getElementById('output');
        output.innerHTML += text + '<br>';
        output.scrollTop = output.scrollHeight;
      }

      clearOutput() {
        document.getElementById('output').innerHTML = '';
      }

      updateUI() {
        this.healthElement.textContent = this.health;
        this.bananasElement.textContent = this.bananas;
        this.songsElement.textContent = this.jungleSongs;
        this.climbBtn.style.display = this.canClimbUp ? 'block' : 'none';
      }

      async goldenBananaMiniGame() {
        return new Promise((resolve) => {
          this.print("<div class='minigame'>");
          this.print("<strong>GOLDEN BANANA CHALLENGE!</strong><br><br>");
          this.print("Riddle: What can you catch but not throw?");

          const options = {
            "A": "A ball", "B": "A cold", "C": "A fish", "D": "A shadow"
          };

          this.print("<div class='options'>");
          Object.entries(options).forEach(([key, value]) => {
            this.print(`<button onclick="game.resolveMiniGame('${key}')">${key}: ${value}</button>`);
          });
          this.print("</div></div>");

          this.resolveMiniGame = (choice) => {
            const minigame = document.querySelector('.minigame');
            if (minigame) minigame.remove();
            if (choice === 'B') {
              this.print("<span style='color: #D4AF37'>CORRECT! You win the golden banana!</span>");
              resolve(true);
            } else {
              this.print("<span style='color: #C84C32'>Wrong answer! Try again later.</span>");
              resolve(false);
            }
          };
        });
      }

      start() {
        this.print("Welcome to SWINGER MONKEY!");
        this.print("Swing through the jungle and collect bananas!");
        this.print("<span style='color: #D4AF37'>GOAL: Find the Golden Banana + collect 69 bananas to save the forest!</span>");
        this.print("---");
        this.print("Use the buttons or keyboard (L/R/S/U/Q) to navigate.");
        this.print("---");
        this.updateUI();
      }

      restart() {
        this.init();
        this.clearOutput();
        this.start();
        this.updateUI();
      }

      async handleChoice(choice) {
        if (this.gameOver) return;

        if (choice === 'q') {
          this.health = 0;
          this.gameOver = true;
          this.print("<span style='color: #C84C32'>You quit the game. Thanks for playing!</span>");
          this.updateUI();
          return;
        }

        if (choice === 'u' && !this.canClimbUp) return;

        this.canClimbUp = false;
        const event = this.events[Math.floor(Math.random() * this.events.length)];

        const directions = { 'l': 'left', 'r': 'right', 's': 'straight', 'u': 'up' };
        this.print(`<span style='color: #8B7355'>You swing ${directions[choice]}...</span>`);

        switch(event) {
          case 'snake':
            if (this.jungleSongs > 0) {
              this.jungleSongs--;
              this.print("You encountered a sneaky snake! But you used a jungle song to scare it away. No damage taken!");
            } else {
              const damage = Math.floor(Math.random() * 16) + 10;
              this.health -= damage;
              this.print(`<span style='color: #C84C32'>You encountered a sneaky snake! You lost ${damage} health.</span>`);
            }
            break;
          case 'banana_tree':
            const reward = Math.floor(Math.random() * 5) + 1;
            this.bananas += reward;
            this.print(`<span style='color: #00A86B'>You found a banana tree! You picked ${reward} bananas.</span>`);
            break;
          case 'banana_stash':
            const stashReward = Math.floor(Math.random() * 11) + 5;
            this.bananas += stashReward;
            this.print(`<span style='color: #00A86B'>You found another monkey's stash! You borrowed ${stashReward} bananas.</span>`);
            break;
          case 'muddy_pit':
            const pitDamage = Math.floor(Math.random() * 11) + 5;
            this.health -= pitDamage;
            this.print(`<span style='color: #C84C32'>You fell into a muddy pit! You lost ${pitDamage} health.</span>`);
            break;
          case 'golden_banana':
            if (!this.hasGoldenBanana) {
              this.print("<span style='color: #D4AF37'>You found a GOLDEN BANANA! Complete the challenge to earn it!</span>");
              if (await this.goldenBananaMiniGame()) {
                this.bananas += 20;
                this.hasGoldenBanana = true;
                this.print("<span style='color: #D4AF37'>You earned the golden banana! +20 bananas!</span>");
              }
            } else {
              this.print("You found another golden banana spot, but you already have one!");
            }
            break;
          case 'meet_friend':
            const friends = ['kaa', 'baloo', 'wolf pack'];
            const friend = friends[Math.floor(Math.random() * friends.length)];
            if (friend === 'kaa') {
              this.print("<span style='color: #40E0D0'>You met Kaa! He showed you how to climb higher into the trees.</span>");
              this.canClimbUp = true;
            } else if (friend === 'baloo') {
              this.jungleSongs++;
              this.print("<span style='color: #40E0D0'>You met Baloo! He taught you a jungle song to scare away snakes.</span>");
            } else {
              this.health = Math.min(100, this.health + 15);
              this.print("<span style='color: #40E0D0'>You met the Wolf Pack! They helped restore your health. +15 health!</span>");
            }
            break;
          default:
            this.print("You swing for a while but nothing exciting happens.");
        }

        this.updateUI();

        // Check win/lose conditions
        if (this.health <= 0) {
          this.gameOver = true;
          this.print("---");
          this.print("<span style='color: #C84C32; font-size: 0.7rem'>GAME OVER! You ran out of health.</span>");
          this.print("Click RESTART to try again!");
        } else if (this.bananas >= 69 && this.hasGoldenBanana) {
          this.gameOver = true;
          this.print("---");
          this.print("<span style='color: #D4AF37; font-size: 0.7rem'>VICTORY! You saved the jungle!</span>");
          this.print("Congratulations, mighty monkey!");
        }
      }
    }

    let game;
    document.addEventListener('DOMContentLoaded', function() {
      game = new Game();
      game.start();
    });
  </script>
</body>
</html>
